{% extends "base_dashboard.html" %}

{% block title %}Grinder Results – Victory AI{% endblock %}

{% block content %}

<div class="mb-6">
  <a href="/grinder" class="text-indigo-400 hover:text-indigo-300 text-sm">← Analyze Another Website</a>
</div>

{% if error %}
<div class="bg-red-900 border border-red-700 rounded-xl p-6">
  <h3 class="text-lg font-semibold text-red-300 mb-2">Error</h3>
  <p class="text-red-200">{{ error }}</p>
</div>
{% else %}

<h2 class="text-2xl font-bold mb-8">Website Analysis Results</h2>

<!-- SCORE CARD -->
<div class="bg-slate-900 rounded-xl p-6 mb-6 border border-slate-800">
  <div class="flex items-center justify-between mb-4">
    <h3 class="text-lg font-semibold">Overall Score</h3>
    <span class="text-3xl font-bold {% if score >= 80 %}text-green-400{% elif score >= 60 %}text-yellow-400{% else %}text-red-400{% endif %}">
      {{ score }}/100
    </span>
  </div>
  <div class="w-full bg-slate-800 rounded-full h-3">
    <div class="h-3 rounded-full {% if score >= 80 %}bg-green-500{% elif score >= 60 %}bg-yellow-500{% else %}bg-red-500{% endif %}" 
         style="width: {{ score }}%"></div>
  </div>
</div>

<!-- DETAILS -->
<div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
  <div class="bg-slate-900 rounded-xl p-6 border border-slate-800">
    <p class="text-sm text-slate-400 mb-2">Website URL</p>
    <p class="font-semibold text-sm break-all">{{ url }}</p>
  </div>
  
  <div class="bg-slate-900 rounded-xl p-6 border border-slate-800">
    <p class="text-sm text-slate-400 mb-2">Load Time</p>
    <p class="text-2xl font-semibold {% if load_time <= 2 %}text-green-400{% elif load_time <= 3 %}text-yellow-400{% else %}text-red-400{% endif %}">
      {{ load_time }}s
    </p>
  </div>
  
  <div class="bg-slate-900 rounded-xl p-6 border border-slate-800">
    <p class="text-sm text-slate-400 mb-2">Page Title</p>
    <p class="font-semibold {% if title == 'Missing' %}text-red-400{% else %}text-slate-300{% endif %}">
      {{ title }}
    </p>
  </div>
  
  <div class="bg-slate-900 rounded-xl p-6 border border-slate-800">
    <p class="text-sm text-slate-400 mb-2">H1 Tags Count</p>
    <p class="text-2xl font-semibold {% if h1_count == 1 %}text-green-400{% else %}text-yellow-400{% endif %}">
      {{ h1_count }}
    </p>
    <p class="text-xs text-slate-500 mt-1">{% if h1_count == 1 %}Perfect{% elif h1_count == 0 %}Missing{% else %}Too many{% endif %}</p>
  </div>
  
  <div class="bg-slate-900 rounded-xl p-6 border border-slate-800">
    <p class="text-sm text-slate-400 mb-2">Meta Description</p>
    <p class="text-sm {% if meta_desc == 'Missing' %}text-red-400{% else %}text-slate-300{% endif %}">
      {% if meta_desc == 'Missing' %}Missing{% else %}{{ meta_desc[:100] }}{% if meta_desc|length > 100 %}...{% endif %}{% endif %}
    </p>
  </div>
  
  <div class="bg-slate-900 rounded-xl p-6 border border-slate-800">
    <p class="text-sm text-slate-400 mb-2">Images without ALT</p>
    <p class="text-2xl font-semibold {% if img_no_alt == 0 %}text-green-400{% else %}text-yellow-400{% endif %}">
      {{ img_no_alt }}
    </p>
    <p class="text-xs text-slate-500 mt-1">{% if img_no_alt == 0 %}All images have ALT tags{% else %}Missing ALT tags{% endif %}</p>
  </div>
</div>

<!-- ACTIONS -->
<div class="flex gap-4">
  <a href="/grinder" class="bg-indigo-600 hover:bg-indigo-700 px-6 py-2 rounded-lg font-semibold">
    Analyze Another Website
  </a>
  <a href="/ai-insights?website={{ url }}" class="bg-slate-700 hover:bg-slate-600 px-6 py-2 rounded-lg font-semibold">
    Get AI Insights
  </a>
  <a href="/reports" class="bg-slate-700 hover:bg-slate-600 px-6 py-2 rounded-lg font-semibold">
    View All Reports
  </a>
</div>

{% endif %}

{% endblock %}
